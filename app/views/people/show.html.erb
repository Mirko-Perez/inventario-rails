<div class="page-header">
  <h1><%= @person.full_name %></h1>
  <div class="header-actions">
    <%= link_to "Edit", edit_person_path(@person), class: "btn btn-secondary" %>
    <%= link_to "Back to People", people_path, class: "btn btn-outline" %>
  </div>
</div>

<div class="person-details">
  <div class="detail-section">
    <h2>Personal Information</h2>
    <div class="detail-grid">
      <div class="detail-item">
        <label>First Name:</label>
        <span><%= @person.first_name %></span>
      </div>
      <div class="detail-item">
        <label>Last Name:</label>
        <span><%= @person.last_name %></span>
      </div>
    </div>
  </div>

  <div class="detail-section">
    <h2>Current Articles (<%= @current_articles.count %>)</h2>
    <% if @current_articles.any? %>
      <div class="articles-list">
        <% @current_articles.each do |article| %>
          <div class="article-item">
            <div class="article-info">
              <h4><%= link_to "#{article.brand} #{article.model}", article_path(article) %></h4>
              <p>Entry Date: <%= article.entry_date.strftime("%B %d, %Y") %></p>
            </div>
            <div class="article-actions">
              <%= link_to "Transfer", new_article_transfer_path(article), class: "btn btn-sm btn-primary" %>
              <%= link_to "View", article_path(article), class: "btn btn-sm btn-outline" %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="no-articles">This person is not currently carrying any articles.</p>
    <% end %>
  </div>

  <div class="detail-section">
    <h2>Transfer History</h2>
    <% if @transfer_history.any? %>
      <div class="transfer-list">
        <% @transfer_history.each do |transfer| %>
          <div class="transfer-item">
            <div class="transfer-date">
              <%= transfer.transfer_date.strftime("%B %d, %Y") %>
            </div>
            <div class="transfer-details">
              <strong>Article:</strong> <%= link_to "#{transfer.article.brand} #{transfer.article.model}", article_path(transfer.article) %><br>
              <% if transfer.from_person_id == @person.id %>
                <strong>Transferred to:</strong> <%= transfer.to_person.full_name %>
              <% else %>
                <strong>Received from:</strong> <%= transfer.from_person.full_name %>
              <% end %>
              <% if transfer.notes.present? %>
                <div class="transfer-notes"><%= transfer.notes %></div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="no-transfers">No transfer history for this person.</p>
    <% end %>
  </div>
</div>

<div class="danger-zone">
  <%= link_to "Delete Person", person_path(@person), method: :delete, 
              class: "btn btn-danger", 
              confirm: "Are you sure you want to delete this person? This action cannot be undone." %>
</div>
